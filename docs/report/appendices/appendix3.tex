\chapter{Code Examples}
\label{chp:code-examples}
\section{Example MongoDB Student Document}
\label{sec:mongodb-student-document}

Below is an example MongoDB student document. The document contains the user information retrieved from the Aberystwyth University LDAP server. The submissions array contains all of the students tracked project data. Each submission entry has a one-to-one relation with the XML file. The submission \texttt{\_id} is unique for each submission. The \texttt{\_id} also contains the date which is useful to know when submission was posted. The submission contains input from the student, such as the title and module. The XML file that is submitted is processed and transformed into the correct formatting (JSON) which contains all of the tracked files. Each file has its path, changes, and cache. After post-processing, the result is added to the submission. 

\begin{lstlisting}[
  breaklines = true,
  postbreak  = \mbox{\textcolor{red}{$\hookrightarrow$}\space},
  frame      = single,
  language   = JSON
]
{
  "_id" : ObjectId("5aca40bda326f6001046e1b7"),
  "uid" : "abc12",
  "full_name" : "John Smith",
  "user_type" : "ABUG",
  "submissions" : [
    {
      "_id": ObjectId("5accc6ba7041650010aa3a37"),
      "title": "A Submission",
      "module": "CS12345",
      "files": {
        "src/Test__java": {
          "path": "src/Test.java",
          "changes": [
            {
              "offset": "0",
              "oldString": "",
              "newString": "package PACKAGE_NAME;\n\npublic class Test {\n}\n",
              "source": "OTHER",
              "timestamp": "1522599829159"
            }
          ],
          "cache": "cHVibGljIGNsYXNzIFRlc3QgewoKfQ=="
        }
      },
      "result": {
        "src/Test__java": {
          "diff_ratio": 1,
          "frequency_total": 45,
          "frequency_clipboard": 0,
          "frequency_external": 0,
          "frequency_other": 45,
          "frequency_time_source_data": [
            {
              "f": 45,
              "s": "OTHER",
              "t": NumberLong("1522599829159")
            }
          ]
        }
      }
    }
  ]
}
\end{lstlisting}
